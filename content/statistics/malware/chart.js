var endDate = new Date(dateTo.replace(" UTC", "Z"));
var endDateStr = Intl.DateTimeFormat('en-GB', { hour12: false, year: "numeric", month: "short", day: "numeric", hour: "numeric", minute: "2-digit", timeZoneName: "shortGeneric" }).format(endDate);
var chart = new Highcharts.Chart({
        
	chart: {
            type: 'pie',
            renderTo: 'map'
	},
	title: {
	    text: 'Infections per Malware Family'
	},
    credits: {
        position: {
            align: "center"
        }
    },
    subtitle: {
        text: 'for the last 10 days ending ' + endDateStr
    },
    colors: [
        "#f14a41",
        "#fcb819",
        "#ffdf01",
        "#d1dc26",
        "#9bc83a",
        "#81c67f",
        "#7ecfd0",
        "#5cbdea",
        "#4d6eb5",
        "#b55fa6",
        "#f0478f",
        "#cccccc",
    ],
    tooltip: {
       	    pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'

	},
    plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true
                },
                showInLegend: false 
            }
    },
	series: [{
        type: 'pie',
        name: 'Infections',
        data: data,
        innerSize: '50%' 
	}]
    });

  